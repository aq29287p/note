---
title: 0141 & 142. Linked List Cycle
---

# 0141 & 142. Linked List Cycle

## 解答
1 判斷 list length =0 or 1 , no cycle  
2 slow 走一步 fast 走兩步 ,  
    fast or fast.next 到尾巴 -> no cycle  停止迴圈  
    slow == fast -> cycle (141 return true end)  
3 算出cycle length by slow 停在原地, fast 走一圈  
4 算出cycle start point by slow 在起點, fast 在 起點+cycle length  
    then slow and fast 一起走一步 直到slow==fast 就是答案

### 實作

:::: code-group
::: code-group-item c++

``` cpp
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    bool hasCycle(ListNode *head) {
        ListNode* fast=head;
        ListNode* slow=head;
        while(fast && fast->next){
            slow = slow->next;
            fast = fast->next->next;
            if(slow==fast){
                fast=fast->next;
                int cycle_length=1;
                while(slow==fast){
                    fast=fast->next;
                    cycle_length++;
                }
                slow=head;
                for(int i=0;i<cycle_length;i++){
                    fast=fast->next;
                }
                while(slow!=fast){
                    fast=fast->next;
                    slow=slow->next;
                }
                return slow;
            }
        }
        return false;
    }
};

```

:::
::: code-group-item python

``` python
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None

class Solution:
    def hasCycle(self, head: Optional[ListNode]) -> bool:
        while not head or not head.next:
            return 
        fast=head
        slow=head
        while fast and fast.next:
            fast=fast.next.next
            slow=slow.next
            if slow==fast:
                cycle_length=1
                fast=fast.next
                while slow!=fast:
                    fast=fast.next
                    cycle_length+=1
                slow=head
                for i in range(cycle_length):
                    fast=fast.next
                while slow!=fast:
                    fast=fast.next
                    slow=slow.next
                return slow
        return 
```
::::

### 分析
- 時間複雜度：$\mathcal{O}(n)$
- 空間複雜度：$\mathcal{O}(1)$  
